# 8. MetaPath2Vec

metapath2vec用于解决异构网络的embedding表示。是将deepwalk的算法思路引入到异构网络当中，并针对异构网络的特点，针对deepwalk算法中的各个步骤，针对性的进行优化。

## 8.1、概念

异构网络不同于同构网络在于，同构网络中的nodes都是同一类型的节点，link都是针对同一类型节点的链接。而异构网络节点可以是不同类型的实体，链接也可以是不同实体之间的链接。拿电商行为来说，用户A购买了店铺S1的商品L1，用户A购买了店铺S2的商品L2。如果我们想用同构网络来表示用户的购买session，那么网络的节点就是可以用商品来表示，并把同一用户的购买商品按顺序链接起来。但是这样就丢失了用户和店铺这两个实体。异构网络就可以解决这个问题，我们可以直接把用户和店铺进行链接，店铺和商品进行链接，用户和商品进行链接起来，形成一个异构网路。

### 定义问题

**异构网络（Heterogeneous Networks）:** 异构网络由图G(V,E,T)表示，其中节点v和链接e分别对应映射函数：

$\phi(v):V->T_v$和$\phi(e):E->T_e$，这里的$T_e$和$T_v$指对象和关系类型的集合。并且$|T_e|+|T_v|\gt 2$。如果等于2的话就是同构网络。这里想要说明的意思其实就是说 异构网络是由一个或者多个类型的节点，以及一个或者多个类型的链接组成的图。

**异构网络表示学习(Heterogeneous Network Reperesentation Learning):**给定一个异构网络G，这里的工作就是将图中的节点v表示成一个低纬向量$X\in R^{|V|*d},d\lt\lt|V|$，用于学习出图中节点的结构和语义相关性。而该问题的输出则为低纬矩阵X，表示的是一个所有节点的低纬向量，所以它的大小是节点个数*d。而该问题因为同时优化不同类型的节点，所以最后生成的节点低纬向量都在同一高纬空间。所以我们能很方便的将学习出的向量应用于各种各样的任务。

## 8.2、异构网络embedding：metapath2vec

在metapath2vec中，采用和deepwalk类似的方式，利用skip-gram来学习图的embedding。主要步骤由两步，

1. 利用随机游走来从图中获取序列，
2. 利用skip-gram优化提取的序列。但是针对异构图，这部分中都存在一定的差异。这里分别说一下。

