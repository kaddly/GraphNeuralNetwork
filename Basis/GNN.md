# 1. Graph基本介绍

图是由映射到一组边的一组节点/顶点组成的结构。 

这些单词本身会给您一个提示。 节点/顶点是图形上的一个点，边通过线段将两个顶点连接在一起。 我们用=> **edge =（u，v）**表示连接一对顶点的**边**

下图表示具有**3**个顶点和**2个**边的Graph。 我们不需要将图中的所有顶点连接在一起。

![image-20220522093443766](./img/Graph.jpg)

## 1.1 图的表示

- 无向图

- 有向图

- 邻接矩阵

- 图的性质：度（degree）

  有向图：出度、入度

## 1.2 图的特征

- 子图 Subgraph

  子图所有节点和边都在大图中存在

- 连通图 Connected Graph　＆　连通分量 Connected Component

  - 无向图

    - 连通图：任意节点i 可以通过一些边j 可达
    - 连通分量：无向图 G的一个极大连通子图称为 Ｇ的一个连通分量（连通分支）。连通图只有一个连通分量，即自身；非连通的的无向图有多个连通分量

  - 有向图

    - 强连通图：给定有向图$Ｇ=(Ｖ,Ｅ)$，并且给定该图Ｇ中的任意两个结点ｕ和ｖ，如果结点ｕ和结点ｖ相互可达，即至少存在一条路径可以从结点ｕ开始，到结点ｖ终止，同时存在至少一条路径可以由结点ｖ开始，到结点ｕ终止，那么就称该有向图Ｇ是**强连通图**。

      ![image-20211113225617015](./img/强连通图.jpg)

    - 弱连通图：若至少有一对结点不满足单向连通，但是去掉方向从无向图的观点看是连通图，则Ｄ称为弱连通图。

- 最短路径 Shortest Path

  - 两个结点所达到的最短路径

- 图直径 Diameter

  - 图中两两结点最短路径中最长的路径为图直径

## 1.3 图中心性 Centrality

### 度中心性 Degree Centrality

```
度中心性的基本思想：重要的节点就是拥有许多连接的节点。你的社会关系越多，你的影响力就越强。
整个网络一共有n个节点，意味着每个人最多可以有n-1个社会关系
```

$$
DC_i=\frac{N_{degree}}{n-1}
$$

其中

- $N_{degree}$表示该节点$i$的度

- $n$表示节点的数量

### 特征向量中心性 Eigenvector Centrality

```
特征向量中心性的基本思想是，一个节点的中心性是相邻节点中心性的函数。也就是说，与你连接的人越重要，你也就越重要。
特征向量中心性和点度中心性不同，一个点度中心性高即拥有很多连接的节点，但特征向量中心性不一定高，因为所有的连接者有可能特征向量中心性很低。
同理，特征向量中心性高并不意味着它的点度中心性高，它拥有很少但很重要的连接者也可以拥有高特征向量中心性。
```

$$
EC_i=x_i=c\sum_{j=1}^n{a_{ij}x_j}
$$

其中

- c为一个比例常数
- 记$x=[x_1,x_2,...,x_n]^T$

经过多次迭代到达稳定时，可以写成如下矩阵形式
$$
x=cAx
$$
这里x是矩阵A关于$c^{-1}$对应的特征向量，也可以表示：
$$
Ax=\lambda x
$$
eg.

考虑下面的图，以及相应的$5×5$的邻接矩阵(Adjacency Matrix)，A。

![在这里插入图片描述](./img/矩阵图.jpg)

![image-20211113235429627](./img/邻接矩阵.jpg)

现在考虑x，一个5x1的向量，向量的值对应图中的每个点。

在这种情况下，我们计算的是每个点的点度中心性（degree centrality），即以点的连接数来衡量中心性的高低。

矩阵A乘以这个向量的结果是一个5x1的向量：
$$
Ax
$$
结果向量的第一个元素是用矩阵A的第一行去“获取”每一个与第一个点有连接的点的值（连接数，点度中心性），也就是第2个、第3个和第4个点的值，然后将它们加起来。

换句话说，邻接矩阵做的事情是将相邻节点的求和值重新分配给每个点。这样做的结果就是“扩散了”点度中心性。你的朋友的朋友越多，你的特征向量中心性就越高。

![image-20220522105821629](./img/update.jpg)

```
我们继续用矩阵A乘以结果向量。
实际上，我们允许这一中心性数值再次沿着图的边界“扩散”。我们会观察到两个方向上的扩散（点既给予也收获相邻节点）。
我们猜测，这一过程最后会达到一个平衡，特定点收获的数量会和它给予相邻节点的数量取得平衡。
既然我们仅仅是累加，数值会越来越大，但我们最终会到达一个点，各个节点在整体中的比例会保持稳定。
图中的点存在一个数值集合，对于它，用矩阵A去乘不会改变向量各个数值的相对大小。也就是说，它的数值会变大，但乘以的是同一个因子。
满足这一属性的向量就是矩阵M的特征向量。特征向量的元素就是图中每个点的特征向量中心性。
```

### 中介中心性 Betweenness Centrality

```
中介中心性的思想是：如果一个成员位于其他成员的多条最短路径上，那么该成员就是核心成员，就具有较大的中介中心性.
```

$$
BC=\sum{\frac{d_{st}()}{d_{st}}}
$$

其中

- $d_{st}$表示s到t的最短路径数量
- $d_{st}()$表示从s到t的最短路径中经过节点的数量
- 若需要进行标准化，在如上公式基础上，除以（n-1)(n-2)，n为节点数量

- ![image-20211114003503403](./img/Betweenness Centrality.jpg)

### 连通中心性 Closeness Centrality

```
反映在网络中某一节点与其他节点之间的接近程度。如果一个节点离其他的节点都很近，那么传递信息的时候就不需要依赖其他的节点，说明这个节点很重要。
相比中介中心性，接近中心性更接近几何上的中心位置。
接近中心性高的节点一般扮演的是八婆的角色（gossiper）。他们不一定是名人，但是乐于在不同的人群之间传递消息。
```

$$
d_i=\frac{1}{n-1}\sum_{j\neq i}d_{ij}\\CC_i=\frac{1}{d_i}=\frac{n-1}{\sum_{j\neq i}d_{ij}}
$$

```
这个点的紧密中心性是基于该节点到网络中其余所有节点的最短路径之和
如果进行归一化处理，就是求这个节点到其他所有节点的平均最短距离
一个节点的平均最短距离越小，那么这个进行的紧密中心性就越大。
如果节点i和节点j之间没有路径可达，则定义dij为无穷大，其倒数为0.
```

- ![image-20211114004023159](./img/CC.jpg)

## 1.4 网页排序算法

### Page Rank

```
PageRank的思想认为，指标最好还需要考虑到指向你的那些网页。
也就是说，来自受欢迎的网页的跳转应该重于不太受欢迎的网页的跳转。
这就是PageRank思想的精华，Google就是利用这一思想来给网站排名的。
这里的思想依据和特征向量中心性其实是一致的。
```



![image-20211114004143505](./img/RageRank.jpg)

### HITS

- ![image-20211114004159161](./img/HITS.jpg)

# 2. Graph Embedding

## 2.1 DeepWalk

## 2.2 LINE

## 2.3 SDNE

## 2.4 Node2vec

## 2.5 Struc2vuc

